<%= render "lists/suggested_items" %>

<% if list.user.present? %>
  <% if list.user == current_user || list.users.include?(current_user) %>
    <div class="d-flex justify-content-between ">
      <div class="p-2" id="openSelect">
        <%= link_to "ğŸ”® Voir les suggestions", products_path(l: list.id), class:"btn btn-sm btn-warning ml-1" %>
      </div>

      <div class="dropdown p-2" id="sortList">
        <button class="btn btn-sm btn-outline-secondary dropdown-toggle px-3" type="button" id="dropdownSortButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Trier la liste
        </button>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownSortButton">
          <% list.get_sort_options.each do |option| %>
            <a class="dropdown-item sortOptionBtn" style="cursor: pointer;" data="<%= option %>">par <%= option %></a>
          <% end %>
        </div>
      </div>
    </div>
  <% else %>
    <div class="d-flex justify-content-center mb-3">
      <%= link_to "Enregistrer la liste", "", data: {toggle: "modal", target: ".bd-signup-modal-lg"}, class:"btn btn-warning btn-lg", style:"text-decoration: none;" %>
    </div>
  <% end %>

<% else %>
  <% if user_signed_in? %>
    <div class="d-flex justify-content-center mb-3">
      <%= link_to "Enregistrer la liste", list_copy_path(list), class:"btn btn-lg btn-warning" %>
    </div>
  <% else %>
    <div class="d-flex justify-content-center mb-3">
      <%= link_to "Enregistrer la liste", "", data: {toggle: "modal", target: ".bd-signup-modal-lg"}, class:"btn btn-warning btn-lg", style:"text-decoration: none;" %>
    </div>
  <% end %>
<% end %>

<div class="shadow rounded">
  <div class="list-group list-group-flush" id="uncomplete_list_items" data-url="<%= sort_list_list_items_path(list) %>">
    <%= render 'lists/uncomplete_todo_list', list: list %>
  </div>
</div>

<% if list.user == current_user || list.users.include?(current_user) || list.user.nil? %>
  <div class="my-1 py-2">
    <div class="container fixed-bottom px-1">
      <%= render "list_items/form", list: list, list_item: list_item %>
    </div>

    <div class="shadow rounded mt-2">
      <div class="list-group list-group-flush" id="complete_list_items" data-url="<%= sort_list_list_items_path(list) %>">
        <%= render 'lists/complete_todo_list', list: list, list_items: list_items %>
      </div>
    </div>
  </div>
<% end %>




