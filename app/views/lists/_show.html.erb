<div id="newlistItemForm" style="display: none;"></div>


<div id="listShow" class="alert-primary" style="min-height: 200vh;">
  <div class="sticky-top alert-primary mb-3" id="listBarTop">
    <div class="container px-2">
      <nav class="px-0 navbar navbar-expand-lg d-flex bd-highlight">
        <a class="navbar-brand text-muted d-flex align-items-center mr-auto bd-highlight" href="/"><i class="fas fa-lg fa-arrow-left p-2"></i></a>

        <% if false %>
          <a class="shadow-lg bg-white rounded-pill rounded-lg p-2 bd-highlight text-center ml-2" href="/favorites"><%= cl_image_tag("menu_icons/star", width: 25, height: 25, class:"m-0") %></a>
          <a class="shadow-lg bg-white rounded-pill rounded-lg p-2 bd-highlight text-center ml-2" href="/cuisine"><%= cl_image_tag("menu_icons/search", width: 25, height: 25, class:"m-0") %></a>
           <button class="btn btn-outline-primary font-weight-bold goToSignupBtn" id="installBtn" style="display: none;">Installer l'app</button>


          <div id="listScore" data="<%= list.id %>">
          </div>
        <% end %>


        <div id="score" data="" style="min-height: 45px;">
          <%= render "shared/score", score: current_user.get_score %>
        </div>

      </nav>
    </div>
  </div>

  <div class="container">
    <%= render 'shared/flashes' %>
  </div>

  <div class="wrapper" style="min-height: 60vh;">
    <div class="container mb-3">
      <div class="jumbotron jumbotron-fluid bg-transparent p-0 border-0 m-0">
        <h1 class=""><%= list.name %></h1>
        <div class="d-flex flex-row bd-highlight mt-3 justify-content-start" id="listOptions">
          <%= render "lists/options", list: list %>
          <a class="bd-highlight py-2 mr-1 btn btn-sm bg-light border" style="cursor: pointer;" data-toggle="modal" data-target="#editListModal">Renommer</a>
           <%= link_to list_path(list), method: :delete,  data: { confirm: 'Êtes-vous sûr ?' }, class:"bd-highlight mr-1 btn btn-sm bg-light border text-secondary" do %>
            <i class="fas fa-trash p-1"></i>
          <% end %>
        </div>
      </div>
    </div>
    <div class="container px-2">
      <div class="container px-0" id="todo_list" data="<%= list.id %>">
        <div class="container px-0">

          <ul class="border-0 list-group-item d-flex align-items-center justify-content-between p-0 pl-1 m-0" >
            <div class="d-flex align-items-center">
            </div>
          </ul>
          <div class="search-form-control">
              <input type="text" placeholder="Ajouter un produit..." class="py-4 rounded rounded-lg font-weight-bold form-control form-control-lg text-primary shadow-lg" id="toggleListItemform" style="cursor: pointer;" >
              <button class="btn btn-sm p-0">
                <i class="fas fa-2x fa-plus text-muted px-1" style="cursor: pointer; filter: brightness(1.40);"></i>
              </button>
          </div>

          <%= render 'lists/related_recipes', recipes: recipes, list: list %>


          <% if false %>
              <div id="editHistory" class="m-1">
                <%= render "lists/edit_history", content: @message %>
              </div>
              <div class="dropdown">
                <button class="btn-block btn btn-light border dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <%= list.sorted_by %>
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                  <%= link_to "Tri par rayon", list_sort_path(list, sort_option: "rayon"), remote: true, class:"dropdown-item" %>
                  <%= link_to "Tri par catégorie", list_sort_path(list, sort_option: "category"), remote: true, class:"dropdown-item" %>
                  <%= link_to "Tri par date", list_sort_path(list, sort_option: "date"), remote: true, class:"dropdown-item" %>
                  <%= link_to "Tri par foodgroup", list_sort_path(list, sort_option: "foodgroup"), remote: true, class:"dropdown-item" %>
                </div>
              </div>
          <% end %>

          <div class="my-3">
            <div class="" id="uncomplete_list_items" data-list-id="<%= list.id %>" data-url="<%= sort_list_list_items_path(list) %>">
              <%= render 'lists/uncomplete_todo_list', list: list %>
            </div>
          </div>


          <div id="scrollPoint" style="padding: 20px;">
          </div>

        </div>
      </div>
    </div>
  </div>

  <div class="container px-2">
    <div id="itemsRecommendations" class="pb-5">
        <%= render'lists/suggested_products', categories: @categories %>
    </div>
  </div>



<% if false %>
  <div class="container fixed-bottom bg-transparent"  id="listRecipe">
      <div class="d-flex justify-content-around p-2">
         <a class="p-3 rounded-pill rounded-lg text-center fetchRecipes" style="background-image: linear-gradient(0deg, rgb(249, 66, 6),rgb(250, 134, 22),rgb(251, 202, 37)); cursor: pointer;"><%= cl_image_tag("menu_icons/search", width: 35, class:"m-0") %>
         </a>
      </div>
  </div>
<% end %>

  <div style="padding: 50px;"></div>

</div>





<% unless user_signed_in? %>
<!-- Navbar End -->
<%= render 'shared/login_form' %>
<%= render 'shared/signup_form' %>
<% end %>
<!-- PWA prompt on safari IOS -->
<%= render 'shared/ios_install_popup' %>
<!-- PWA prompt on Android -->
<%= render 'shared/android_install_popup' %>

