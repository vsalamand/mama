

<div class="banner d-flex flex-column">

  <div class="container my-4">
    <%= render 'shared/flashes' %>
  </div>

  <div class="container">

    <div class="jumbotron text-center d-flex align-items-center flex-column bg-dark p-0">
      <div class="d-flex mb-1">
        <%= link_to "Retour √† la liste", url_for(:back), class:"btn btn-light border m-1" %>
        <% if user_signed_in? %>
          <%= link_to "Voir mon compte", root_path, class:"btn btn-light border m-1" %>
        <% else %>
         <%= link_to "Enregistrer la liste", "", data: {toggle: "modal", target: ".bd-signup-modal-lg"}, class:"btn bg-light border m-1 signupBtn", context: "Share list", action: "save_list" %>
        <% end %>
      </div>
      <h1 class="m-0 text-white">Partager</h1>
      <hr class="my-4">

        <div class="row m-2">
          <div class="py-2 rounded text-center mb-2">

            <% if user_signed_in? %>
                <%= form_tag(list_email_path(@list), remote: true) do |f| %>
                  <%= submit_tag "Envoy√©e !", :value => "‚úâÔ∏è Recevoir par email", class:"btn btn-lg btn btn-warning", id:"emailList" %>
                <% end %>
            <% else %>
                <button class="btn btn-lg btn btn-warning" data-toggle="modal" data-target="#shareModal">‚úâÔ∏è Recevoir par email</button>
            <% end %>


            <hr class="my-4">

            <div class="d-flex">
              <!-- Target -->
              <input class="form-control" type="text" id="listLink" value="<%= list_url(@list) %>">

              <!-- Trigger -->
              <button class="clipboard-btn btn btn-link font-weight-bold" data-clipboard-target="#listLink" id="copyLink">
                  COPIER
              </button>
            </div>

            <hr class="my-4">

            <% if user_signed_in? %>
              <button class="btn btn-lg btn btn-primary" data-toggle="modal" data-target="#collabListModal">üëã Inviter un ami √† g√©rer la liste</button>
            <% else %>
             <%= link_to "üëã Inviter un ami √† g√©rer la liste", "", data: {toggle: "modal", target: ".bd-signup-modal-lg"}, class:"btn btn-lg btn btn-primary signupBtn", context: "Share list", action: "send_invite" %>
            <% end %>
          </div>
        </div>

    </div>


  </div>

</div>

  <!-- Share Modal -->
  <div class="modal fade" id="shareModal" tabindex="-1" role="dialog" aria-labelledby="shareModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="shareModalLabel">Envoyer par email</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body p-0 m-0">
          <%= form_tag(list_email_path(@list), class: 'form-group mb-0') do |f| %>
            <div class="shadow px-2 bg-white py-4">
              <%= text_field_tag 'emailShare', '', value: "#{current_user.present? ? current_user.email : ''}", type: "email", placeholder: "Votre email", class:"form-control py-4 mb-3 rounded" %>
              <div class="d-flex align-items-center justify-content-end">
                <%= submit_tag "submit",:value => "Envoyer", class:"btn btn-warning closeModal" %>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <!-- Collaborators List Modal -->
  <div class="modal fade" id="collabListModal" tabindex="-1" role="dialog" aria-labelledby="collabListModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content bg-white">
        <div class="modal-header">
          <h5 class="modal-title" id="collabListModalLabel">Envoyer une invitation</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body m-0 p-0">
          <%= render 'collaborations/index' %>
        </div>
        <div class="modal-body m-0 p-0">
          <%= render 'collaborations/form', list: @list %>
        </div>
      </div>
    </div>
  </div>




<% unless user_signed_in? %>
  <div class="fixed-bottom bg-white border-top">
    <div class="wrapper">
      <nav class="px-0 pt-0 pb-1 navbar navbar-expand-lg d-flex align-items-center justify-content-center">
        <div class="container px-2 d-flex flex-column ">
          <small class="text-muted text-center p-1">Connectez-vous pour enregistrer vos listes</small>
          <div class="d-flex justify-content-center">
            <%= link_to "Se connecter", "", data: {toggle: "modal", target: ".bd-login-modal-lg"}, class:"btn btn-sm rounded btn-light border px-3 m-1"  %>

            <!--alter the login link to trigger the opening of the modal -->
            <%= link_to "S'inscrire", "", data: {toggle: "modal", target: ".bd-signup-modal-lg"}, class:"btn btn-sm rounded btn-secondary border px-3 m-1 signupBtn", context: "Show list", action: "signup" %>
          </div>
        </div>
      </nav>
    </div>
  </div>
<% end %>

<!-- Navbar End -->
<%= render 'shared/login_form' %>
<%= render 'shared/signup_form' %>

