<div class="container">
  <%= link_to 'Revenir', food_list_path(@foodlist), class: 'btn btn-primary btn-lg' %>
  <div class="row">
    <h1><strong><%= @foodlist.name %></strong></h1>
    <h4><%= @foodlist.foods.size %> ingrÃ©dients</h4>
  </div>

  <div class="row">
    <ul>
      <% @foodlist.food_list_items.order(:id).each do |fli| %>
        <li>
          <h3>
            <%= fli.food.name.capitalize %>
            <h6>
              <% if fli.food.store_items.where(is_available: true).any? %>
                ðŸ›’<%= fli.food.get_cheapest_store_item.name %> Ã  <strong><%= fli.food.get_cheapest_store_item.price %>â‚¬</strong> (âž¡ <%= fli.food.get_cheapest_store_item.price_per_unit %>â‚¬/<%= fli.food.get_cheapest_store_item.product.unit.name %>) @<%= fli.food.get_cheapest_store_item.store.name %>
              <% else %>
                ðŸ›’Aucun rÃ©sultat disponible
              <% end %>
              <%= link_to 'remove', food_list_food_list_item_path(fli.food_list, fli), method: :delete %>
            </h6>
          </h3>
        </li>
      <% end %>
    </ul>
  </div>
</div>

<div class="container">
  <div class="row">
    <h1><strong>Ajouter des ingrÃ©dients</strong></h1>
  </div>
  <div class="row">
    <h4><strong>RECHERCHE ðŸ”Ž </strong></h4>
    <%= form_tag(add_food_list_path, :method => "get") do %>
      <%= text_field_tag :query, params[:query], placeholder: "Chercher des ingrÃ©dients", required: true %>
      <%= submit_tag "Chercher" %>
    <% end %>
  </div>
  <div class="row">
    <% if @search %>
      <% @search.each do |food| %>
        <% if food.present? %>
          <%= link_to create_foodlist_item_food_list_item_path(@foodlist, food), :action => 'go' do %>
              <div class="btn btn-default btn-sm">
                <h5 class="text-left"><%= food.name %></h5>
                <% if food.store_items.where(is_available: true).any? %>
                  <p class="text-left">dÃ¨s <%= food.get_cheapest_store_item.price_per_unit %>â‚¬/<%= food.get_cheapest_store_item.product.unit.name %></p>
                  <p class="text-left">@<%= food.get_cheapest_store_item.store.name %></p>
                <% else %>
                  <p class="text-left">aucun produit disponible</p>
                  <p class="text-left">hors saison</p>
                <% end %>
              </div>
          <% end %>
        <%end %>
      <% end %>
    <% end %>
  </div>
</div>

<div class="container">
  <div class="row">
    <% unless @similar_food.nil? %>
      <h4><strong><%= @foodlist.foods.first.name.upcase %> + ðŸ‘‡ = ðŸ’š</strong></h4>
      <% @similar_food.each do |food| %>
        <% if food.present? && food.store_items.where(is_available: true).any? %>
          <%= link_to create_foodlist_item_food_list_item_path(@foodlist, food), :action => 'go' do %>
              <div class="btn btn-default btn-sm">
                <h5 class="text-left"><%= food.name %></h5>
                <p class="text-left">dÃ¨s <%= food.get_cheapest_store_item.price_per_unit %>â‚¬/<%= food.get_cheapest_store_item.product.unit.name %></p>
                <p class="text-left">@<%= food.get_cheapest_store_item.store.name %></p>
              </div>
          <% end %>
        <%end %>
      <% end %>
    <% end %>
  </div>
</div>

<div class="container">
  <div class="row">
    <h4><strong>TOP POUR LES RECETTES DU MOMENT ðŸ”¥</strong></h4>
    <% @top_foods.each do |food| %>
      <% if food.present? && food.store_items.where(is_available: true).any? %>
        <%= link_to create_foodlist_item_food_list_item_path(@foodlist, food), :action => 'go' do %>
            <div class="btn btn-default btn-sm">
              <h5 class="text-left"><%= food.name %></h5>
              <p class="text-left">dÃ¨s <%= food.get_cheapest_store_item.price_per_unit %>â‚¬/<%= food.get_cheapest_store_item.product.unit.name %></p>
              <p class="text-left">@<%= food.get_cheapest_store_item.store.name %></p>
            </div>
        <% end %>
      <% end %>
    <% end %>
  </div>
</div>

<div class="container">
  <div class="row">
    <h4><strong>EN PROMO ðŸ¤‘</strong></h4>
    <% @promo_foods.each do |food| %>
      <% if food.present? && food.store_items.where(is_available: true).any? %>
        <%= link_to create_foodlist_item_food_list_item_path(@foodlist, food), :action => 'go' do %>
            <div class="btn btn-default btn-sm">
              <h5 class="text-left"><%= food.name %></h5>
              <p class="text-left"><%= food.get_promo_store_item.promo_price_per_unit %>â‚¬/<%= food.get_promo_store_item.product.unit.name %> (<strike><%= food.get_promo_store_item.price_per_unit %>â‚¬/<%= food.get_promo_store_item.product.unit.name %></strike>)</p>
              <p class="text-left">@<%= food.get_promo_store_item.store.name %></p>
            </div>
        <% end %>
      <% end %>
    <% end %>
  </div>
</div>
