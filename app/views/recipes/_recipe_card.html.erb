<div class="card" id="recipeCard<%= recipe.id %>" style="break-inside: avoid;">
    <%= cl_image_tag("#{recipe.id}", :width=>400, :height=>400, :fetch_format=>:auto, :crop=>"fill", :quality=>"auto:low", class:"card-img-top img-fluid") %>
  <%= link_to recipe.link, target: "_blank", style:"text-decoration: none;" do %>
    <div class="card-body p-2" style="height:6.5rem;">
      <h5 class="card-title text-primary mb-0" style="font-size: 0.9rem;"><%= recipe.title %></h5>
      <p class="card-text"><small class="text-muted" style="font-size: 0.6rem;"><%= URI("#{recipe.link }").host %></small></p>
    </div>
  <% end %>
  <div class="card-body text-center p-0 d-flex flex-column">
    <% unless recipe_list.recipes.include?(recipe) %>
    <a class="card-link font-weight-bold border p-2 rounded-0 text-primary" id="addToMenuBtn" data="<%= recipe.id %>" data-destination="<%= recipe_list.id %>" style="font-size: 0.8rem; cursor: pointer;">Ajouter</a>
    <% else %>
    <a class="text-danger disabled card-link font-weight-bold p-2 border rounded-0" id="removeFromMenuBtn" data="<%= recipe_list.get_recipe_list_item_id(recipe.id) %>" data-container="<%= recipe_list.id %>" style="font-size: 0.8rem; cursor: pointer;">Retirer</a>
    <% end %>
    <a class="card-link font-weight-bold border p-2 text-primary m-0 rounded-0" id="addToListBtn" data-toggle="modal" data-target="#addToListModal" style="font-size:0.8rem; cursor: pointer;">Liste de courses</a>
  </div>
</div>



  <!-- Add to list Modal -->
  <div class="modal fade" id="addToListModal" tabindex="-1" role="dialog" aria-labelledby="addToListModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable" role="document">
      <div class="modal-content bg-white">
        <div class="modal-header">
          <h5 class="modal-title" id="addToListModalLabel">ğŸ›’ CrÃ©er la liste de courses</h5>
        </div>
        <div class="modal-body py-2">
          <p class="lead m-0 p-1">pour <%= recipe_list.recipes.size %> <%= recipe_list.recipes.size > 1 ? "recettes" : "recette" %></p>
        </div>
        <div class="modal-body m-0 p-0" style="height: 65vh;overflow-y: auto;">
          <% recipe_list.recipes.each do |recipe| %>
            <div class="card rounded-0">
              <div class="card-header text-primary font-weight-bold d-flex flex-column">
                <span><%= recipe.title %></span>
                <small class="text-success">QuantitÃ©s pour <%= recipe.servings %></small>
              </div>
              <ul class="list-group list-group-flush">
                <% recipe.items.order(:id).each do |item| %>
                  <li id="item<%= item.id %>" class="list-group-item">
                    <span class="menuItem"><%= item.name %></span>
                    <button type="button" class="close removeItemBtn" data="<%= item.id %>">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </li>
                <% end %>
              </ul>
            </div>
          <% end %>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary py-2" data-dismiss="modal">Annuler</button>
          <button class="btn btn-flat px-5" id="addMenuToListBtn" data="<%= recipe_list.id %>">Valider</button>
        </div>
      </div>
    </div>
  </div>
