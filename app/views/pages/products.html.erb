<div class="sticky-top bg-white">
  <div class="container">
    <nav class="px-0 navbar navbar-expand-lg d-flex justify-content-between" style="background-color: transparent;">

      <% if @list_id.present? %>
        <a class="navbar-brand text-dark d-flex align-items-center" href="/lists/<%= @list_id %>">
          <i class="fas fa-lg fa-arrow-left text-secondary p-2"></i> <span class="text-secondary">Retour</span>
        </a>
      <% else %>
        <a class="navbar-brand text-dark d-flex align-items-center" href="/">
          <i class="fas fa-lg fa-arrow-left text-secondary p-2"></i> <span class="text-secondary">Retour</span>
        </a>
      <% end %>

      <% if false %>
        <button class="btn-lg btn-warning rounded" id="goToSelectRecipesBtn" recipe-data="<%= @selected_recipes %>" list-data="<%= @list_id %>">Continuer</button>
      <% end %>

      <button class="btn-warning btn" id="addToListBtn" data="<%= @selected_items %>" list-data="<%= @list_id %>">Ajouter à ma la liste</button>

    </nav>
  </div>
</div>

<div class="jumbotron jumbotron-fluid py-3 bg-white shadow text-primary">
  <div class="container">
    <h1 class="">Achats fréquents</h1>
  </div>
</div>


<div class="container">
  <% if @lists.any? %>
    <div class="accordion" id="accordionExample">
      <% @lists.each_with_index do |list, index| %>
        <div class="">
          <div class="" id="heading<%= index %>">
            <h2 class="mb-0">
              <p class="font-weight-bold lead text-primary" data-toggle="collapse" data-target="#collapse<%= index %>" aria-expanded="true" aria-controls="collapse<%= index %>" style="cursor: pointer;">
                <%= list.name %>
              </p>
            </h2>
          </div>

          <div id="collapse<%= index %>" class="collapse" aria-labelledby="heading<%= index %>" data-parent="#accordionExample">
            <div class="">
              <ul class="list-group list-group-flush pl-2">
                <% list.get_items_to_buy.compact.sort_by(&:name).each do |item| %>
                  <% if @selected_items.present? && @selected_items.split("&i=").include?(item.name) %>
                    <%= render 'items/selected_item', item: item %>
                  <% else %>
                    <%= render 'items/unselected_item', item: item %>
                  <% end %>
                <% end %>
              </ul>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
</div>


