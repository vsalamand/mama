<% content_for :meta_title, "Cuisine" %>
<% content_for :meta_description, "Sélectionnez les recettes qui vous plaisent pour vos prochains repas !" %>

<% unless ["add_to_homescreen"].include?(params[:action])%>
  <div id="iOSInstallNavbar"></div>
  <div id="androidInstallNavbar"></div>
<% end %>

<div class="sticky-top bg-white">

  <div class="container px-2">
    <nav class="px-0 navbar navbar-expand-lg d-flex justify-content-between">
       <a class="navbar-brand text-dark d-flex align-items-center m-0 text-muted" href="/assistant">
        <i class="fas fa-lg fa-arrow-left p-2"></i> <span class="text-white"></span>
      </a>
    </nav>
  </div>

</div>


<div class="container px-0 mb-5">
  <div id="recipesCuisine">
    <div id="recipesHeader">
      <h1 class="text-muted text-center p-2"><i class="fas fa-utensils text-secondary"></i> Vos recettes</h1>
      <ul class="border-0 rounded-top list-group-item d-flex align-items-center justify-content-center pl-1 pb-0 m-0">
        <div class="d-flex align-items-center">
          <ul class="nav nav-pills nav-justified">
            <li class="nav-item">
              <a class="nav-link active" href="#"><i class="fas fa-lg fa-check-circle text-success"></i><br>Sélectionnées</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/favorites"><i class="fas fa-lg fa-star" style="color: #ffd700 ;"></i><br>Enregistrées</a>
            </li>
          </ul>
        </div>
      </ul>
    </div>

    <div class="d-flex flex-column align-items-center justify-content-center mt-3">
      <% if @recipes.present? %>

        <div id="recipeElements" class="col-sm-4 my-auto">
          <div class="container px-1">
            <div class="jumbotron text-center text-muted mb-2 px-2 py-3">
              <p class="pl-1 lead mb-3">
                <i class="fas fa-share"></i>
                 Partager votre sélection
              </p>

              <div id="poll" class="mb-3 d-flex flex-column px-5">
                <% if @recipe_list.user == current_user %>
                  <% if @recipe_list.poll? %>
                    <%= link_to "Terminer le sondage", set_poll_recipe_list_path(@recipe_list), class:"btn btn-outline-primary border shadow-lg", data: {:confirm => 'Êtes-vous sûr de mettre fin au sondage ? Tous les votes seront perdus.'} %>
                    <small class="text-muted">Toute personne disposant du lien pourra voter.</small>
                  <% else %>
                    <%= link_to "Créer un sondage", set_poll_recipe_list_path(@recipe_list), class:"btn btn-light border shadow-lg" %>
                  <% end %>
                <% end %>
              </div>

              <div class="d-flex">
                <!-- COPY LINK Target -->
                <input class="form-control" type="text" id="recipelistLink" value="<%= recipe_list_url(@recipe_list, host: request.host) %>">
                <!-- COPY LINK Trigger -->
                <button class="clipboard-btn btn btn-light border" data-clipboard-target="#recipelistLink" id="copyLink">
                    COPIER
                </button>
              </div>
            </div>
          </div>
          <%= render partial: 'recipe_list_items/recipe_list_item_card', collection: @recipe_list.recipe_list_items.sort_by{|rli| rli.recipe.title.parameterize }, as: :recipe_list_item, locals: {list: nil } %>
        </div>

      <% else %>
          <div class="d-flex align-items-center m-2 mt-5">
            <div id="description">
              <div class="d-flex w-100 flex-column mb-0">
                <p class="text-muted">Vous n'avez pas sélectionné de recette.</p>
              </div>
            </div>
          </div>
      <% end %>
    </div>
  </div>
</div>



<div style="padding: 50px;"></div>

