<%= render 'shared/admin-navbar' %>

<div class="container">
  <div class="row">
    <h1>Nouveau contenu en attente de validation</h1>
  </div>
  <%= will_paginate @recipes %>
  <div class="my-3">

    <% @recipes.each do |recipe| %>

            <%= render "recipes/admin_recipe", recipe: recipe %>

            <div class="ingredients">
              <ul class="list-group p-0">
                <% recipe.items.order(:id).each do |item| %>
                  <li class="list-group-item p-1 px-2">
                    <%= link_to item_path(item), method: :delete, remote: true do %>
                      <button type="button" class="close ml-1 mr-0 remove-item text-muted" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    <% end %>

                    <p class="m-0 text-muted"><%= item.name %></p>

                    <% if item.category  %>
                      <p class="lead m-0 p-0 font-weight-bold">
                        <%= link_to item.category.name, edit_recipe_item_path(recipe, item, ref: "pending") %>
                        <% if item.quantity %>
                          <span class="lead font-weight-light text-muted">x <%= "%g" % ("%.2f" % item.quantity) %> <%= item.unit.name if item.unit %></span>
                        <% end %>
                      </p>
                    <% else %>
                      <p class="lead m-0 p-0 font-weight-bold"><%= link_to "not found", edit_recipe_item_path(recipe, item), target: "_blank" %></p>
                    <% end %>
                  </li>
                <% end %>
              </ul>
            <%= link_to 'Ajouter un item', new_recipe_item_path(recipe_id: recipe.id), target: "_blank", class:"btn btn-light border m-2" %>
            </div>


    <% end %>
  </div>
  <%= will_paginate @recipes %>

</div>



    <!-- Edit Recipe List Item Modal -->
  <div class="modal fade" id="editRecipeListItemsModal" tabindex="-1" role="dialog" aria-labelledby="editRecipeListItemsModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editRecipeListItemsModal">Cat√©goriser la recette</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body ">

          <div id="editRecipeListItemsForm"></div>

        </div>
      </div>
    </div>
  </div>
